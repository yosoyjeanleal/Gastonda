<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadoras - Gastonda</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --binance-black: #0c0e14;
            --binance-gray: #1e2026;
            --binance-dark-gray: #181a21;
            --binance-yellow: #f0b90b;
            --binance-light-gray: #eaecef;
            --binance-green: #03a66d;
            --binance-red: #cf304a;
            --binance-medium-gray: #474d57;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        body { background-color: var(--binance-black); color: var(--binance-light-gray); padding: 10px; min-height: 100vh; }
        .container { max-width: 900px; margin: auto; background: var(--binance-gray); border-radius: 8px; overflow: hidden; box-shadow: 0 4px 20px rgba(0,0,0,0.25); }
        .header { background: var(--binance-dark-gray); padding: 15px; display: flex; align-items: center; border-bottom: 1px solid #2b2f3a; }
        .logo { margin-right: 10px; }
        .logo-icon { color: var(--binance-yellow); font-size: 22px; margin-right: 8px; }
        h1 { font-size: 18px; font-weight: 600; }
        .tabs { display: flex; background: var(--binance-dark-gray); border-bottom: 1px solid #2b2f3a; flex-wrap: wrap; }
        .tab { flex: 1; text-align: center; padding: 10px; cursor: pointer; font-weight: 500; transition: 0.2s; font-size: 14px; }
        .tab.active { background: var(--binance-gray); color: var(--binance-yellow); border-bottom: 2px solid var(--binance-yellow); }
        .content { padding: 15px; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }

        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: 500; color: #9aa2b1; font-size: 14px; }
        input[type="number"] { width: 100%; padding: 10px; background: var(--binance-dark-gray); border: 1px solid #2b2f3a; border-radius: 4px; color: var(--binance-light-gray); font-size: 14px; }
        input[type="number"]:focus { outline: none; border-color: var(--binance-yellow); }
        .results { margin-top: 15px; padding: 12px; background: var(--binance-dark-gray); border-radius: 4px; font-size: 14px; }
        .result-title { font-size: 16px; font-weight: 600; margin-bottom: 10px; color: var(--binance-yellow); }
        .result-item { display: flex; justify-content: space-between; margin-bottom: 8px; border-bottom: 1px solid #2b2f3a; padding-bottom: 5px; }
        .positive { color: var(--binance-green); font-weight: bold; }
        .negative { color: var(--binance-red); font-weight: bold; }
        .info-box { background: rgba(240,185,11,0.1); border-left: 3px solid var(--binance-yellow); padding: 10px; margin-bottom: 15px; border-radius: 4px; font-size: 0.85em; }

        @media (max-width: 600px) {
            h1 { font-size: 16px; }
            .tab { font-size: 12px; padding: 8px; }
            input[type="number"] { font-size: 13px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- HEADER -->
        <div class="header">
            <div class="logo"><i class="fas fa-coins logo-icon"></i></div>
            <h1>Calculadoras Financieras</h1>
        </div>

        <!-- PESTAÑAS -->
        <div class="tabs">
            <div class="tab active" data-tab="trade">Compra/Venta P2P</div>
            <div class="tab" data-tab="conversion">Conversión USD → USDT</div>
        </div>

        <div class="content">
            <!-- TAB 1: P2P -->
            <div class="tab-content active" id="trade-tab">
                <div class="info-box">Calcula tus ganancias en operaciones de compra y venta de USDT en el mercado P2P</div>
                <div class="form-group"><label for="usdt-amount">Cantidad de USDT:</label><input type="number" id="usdt-amount" value=""></div>
                <div class="form-group"><label for="sell-price">Precio de venta (Bs/USDT):</label><input type="number" id="sell-price" value=""></div>
                <div class="form-group"><label for="buy-price">Precio de compra (Bs/USDT):</label><input type="number" id="buy-price" value=""></div>
                <div class="results" id="results-trade" style="display:none;">
                    <div class="result-title">Resultados:</div>
                    <div class="result-item"><span>Ingresos por venta:</span><span id="sale-income"></span></div>
                    <div class="result-item"><span>Comisión por venta (0.05 USDT):</span><span id="sale-commission" class="negative"></span></div>
                    <div class="result-item"><span>Comisión por anuncio (0.20%):</span><span id="ad-commission" class="negative"></span></div>
                    <div class="result-item"><span>Costo de compra:</span><span id="purchase-cost" class="negative"></span></div>
                    <div class="result-item"><span>Ganancia neta:</span><span id="net-profit"></span></div>
                </div>
            </div>

            <!-- TAB 2: CONVERSIÓN -->
            <div class="tab-content" id="conversion-tab">
                <div class="info-box">Convierte USD → USDT y estima tu ganancia en Bs. (actualiza en tiempo real)</div>
                <div class="form-group"><label for="usd-amount">Monto en USD:</label><input type="number" id="usd-amount" value=""></div>
                <div class="form-group"><label for="exchange-rate">Tasa USD/BS:</label><input type="number" id="exchange-rate" value=""></div>
                <div class="form-group"><label for="usdt-rate">Precio USD/USDT:</label><input type="number" id="usdt-rate" value=""></div>
                <div class="form-group"><label for="sell-price2">Precio de venta USDT/BS:</label><input type="number" id="sell-price2" value=""></div>
                <div class="results" id="conversion-results" style="display:none;">
                    <div class="result-title">Resultados paso a paso:</div>
                    <div class="result-item"><span>Bolívares iniciales (USD × tasa):</span><span id="bs-result"></span></div>
                    <div class="result-item"><span>USD después de banco (–5%):</span><span id="after-bank-result"></span></div>
                    <div class="result-item"><span>USDT recibidos (USD ÷ tasa USDT):</span><span id="usdt-result"></span></div>
                    <div class="result-item"><span>USDT después de comisión Binance (–0.35%):</span><span id="after-binance-result"></span></div>
                    <div class="result-item"><span>Venta final en Bs (USDT × venta Bs):</span><span id="final-bs"></span></div>
                    <div class="result-item"><span>Ganancia/Pérdida:</span><span id="profit-loss"></span></div>
                </div>
            </div>
        </div>
    </div>

<script>
document.addEventListener("DOMContentLoaded",()=>{
  const tabs=document.querySelectorAll(".tab");
  const tabContents=document.querySelectorAll(".tab-content");
  tabs.forEach(tab=>{
    tab.addEventListener("click",()=>{
      tabs.forEach(t=>t.classList.remove("active"));
      tabContents.forEach(c=>c.classList.remove("active"));
      tab.classList.add("active");
      document.getElementById(tab.dataset.tab+"-tab").classList.add("active");
    });
  });

  /* --- P2P calculadora --- */
  const calcTrade=()=>{
    let usdt=parseFloat(document.getElementById("usdt-amount").value)||0;
    let sell=parseFloat(document.getElementById("sell-price").value)||0;
    let buy=parseFloat(document.getElementById("buy-price").value)||0;
    if(usdt>0&&sell>0&&buy>0){
      let income=usdt*sell;
      let commSale=0.05*sell;
      let commAd=income*0.0020;
      let cost=usdt*buy;
      let profit=income-commSale-commAd-cost;
      document.getElementById("sale-income").textContent=income.toFixed(2)+" Bs";
      document.getElementById("sale-commission").textContent="-"+commSale.toFixed(2)+" Bs";
      document.getElementById("ad-commission").textContent="-"+commAd.toFixed(2)+" Bs";
      document.getElementById("purchase-cost").textContent="-"+cost.toFixed(2)+" Bs";
      let np=document.getElementById("net-profit");
      np.textContent=profit.toFixed(2)+" Bs"; np.className=(profit>=0?"positive":"negative");
      document.getElementById("results-trade").style.display="block";
    }
  };
  ["usdt-amount","sell-price","buy-price"].forEach(id=>{
    document.getElementById(id).addEventListener("input",calcTrade);
  });
  calcTrade();

  /* --- Conversión USD→USDT --- */
  const calcConversion=()=>{
    let usd=parseFloat(document.getElementById("usd-amount").value)||0;
    let rate=parseFloat(document.getElementById("exchange-rate").value)||0;
    let usdtRate=parseFloat(document.getElementById("usdt-rate").value)||1;
    let sell=parseFloat(document.getElementById("sell-price2").value)||0;
    if(usd>0&&rate>0&&usdtRate>0&&sell>0){
      let bs=usd*rate;
      let afterBank=usd*0.95;
      let usdt=afterBank/usdtRate; // aquí usamos división en vez de multiplicar
      let afterBinance=usdt*0.9965;
      let finalBs=afterBinance*sell;
      let profit=finalBs-bs;
      document.getElementById("bs-result").textContent=bs.toFixed(2)+" Bs";
      document.getElementById("after-bank-result").textContent=afterBank.toFixed(2)+" USD";
      document.getElementById("usdt-result").textContent=usdt.toFixed(2)+" USDT";
      document.getElementById("after-binance-result").textContent=afterBinance.toFixed(2)+" USDT";
      document.getElementById("final-bs").textContent=finalBs.toFixed(2)+" Bs";
      let pl=document.getElementById("profit-loss");
      pl.textContent=(profit>=0?"Ganancia: ":"Pérdida: ")+profit.toFixed(2)+" Bs"; 
      pl.className=(profit>=0?"positive":"negative");
      document.getElementById("conversion-results").style.display="block";
    }
  };
  ["usd-amount","exchange-rate","usdt-rate","sell-price2"].forEach(id=>{
    document.getElementById(id).addEventListener("input",calcConversion);
  });
  calcConversion();
});
</script>
</body>
</html>

